/*! For license information please see bundle.js.LICENSE.txt */
var MyModules;import*as __WEBPACK_EXTERNAL_MODULE_https_cdn_skypack_dev_chart_js_c4211741__ from"https://cdn.skypack.dev/chart.js";var __webpack_modules__={937:(e,t,n)=>{var r={"./basic-module/index.js":695,"./cnc-banner/index.js":357,"./cnc-public-chat/index.js":11,"./command-manager/index.js":233,"./io-hook/index.js":942,"./latency-indicator/index.js":580,"./legacy-module-support/index.js":330,"./module-manager/index.js":928,"./rc-manager/index.js":479,"./site-information/index.js":446,"./sound-support/index.js":943,"./test-module1/index.js":108,"./test-module2/index.js":221,"./websocket-factory/index.js":618};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=937},695:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"onLoad",value:function(){}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","BasicModule"),a(c,"version","1.0"),a(c,"dependencies",[]),a(c,"description","")},357:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),c=new T(r||[]);return i(a,"_invoke",{value:L(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function _(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(D([])));x&&x!==n&&a.call(x,s)&&(k=x);var E=_.prototype=b.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}})}function L(t,n,r){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:y,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(M.prototype),f(M.prototype,u,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new M(h(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}n.r(t),n.d(t,{default:()=>h});var f=new WeakSet,h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,f)},t=[{key:"openRCLinks",value:function(){var e=window.open("","_blank","width=600,height=400");e.document.open(),e.document.write("<!DOCTYPE html><html><head><title>RC Links</title></head><body><pre>[CDI]\nhttps://crawl.dcss.io/crawl/rcfiles/crawl-git/%n.rc\n\n[CDO]\nhttps://crawl.develz.org/configs/trunk/%n.rc\n\n[CAO]\nhttps://crawl.akrasiac.org/rcfiles/crawl-git/%n.rc\n\n[CUE]\nhttps://underhound.eu/crawl/rcfiles/crawl-git/%n.rc\n\n[CBRO2]\nhttps://cbro.berotato.org/rcfiles/crawl-git/%n\n\n[LLD]\nhttp://lazy-life.ddo.jp/mirror/meta/0.31/rcfiles/%n.rc\n(You can use 0.31 version RC)\n\n[CWZ]\nhttps://webzook.net/soup/rcfiles/trunk/%n.rc\n\n[CXC]\nhttps://crawl.xtahua.com/crawl/rcfiles/crawl-git/%n.rc\n</pre></body></html>")}},{key:"colorizeText",value:function(){var e=this,t=$("#coloredText").text().split(" ");this.colors=this.colors||t.map((function(t){return l(f,e,p).call(e)}));var n=t.map((function(t,n){return'<span style="color:'.concat(e.colors[n],';">').concat(t,"</span>")}));document.getElementById("coloredText").innerHTML=n.join(" ")}},{key:"goSarangbang",value:(a=i(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(f,this,y).call(this);case 2:(t=e.sent).length>0?(t.sort((function(e,t){return e.spectator_count-t.spectator_count})),n=t[t.length-1].spectator_count,t=t.filter((function(e){return e.spectator_count===n})),r=t[Math.floor(Math.random()*t.length)].username,location.hash="#watch-".concat(r)):setTimeout(this.goSarangbang.bind(this),1e3);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"ignoreGameEnded",value:function(e){if("game_ended"===e.msg)return!0}},{key:"handleGoLobby",value:function(e){"go_lobby"===e.msg&&l(f,this,m).call(this)}},{key:"toggleSarangbang",value:(r=i(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=DWEM.Modules.IOHook,n=t.handle_message,r=n.before,a=n.after,this.sarangbang=!this.sarangbang,!this.sarangbang){e.next=10;break}return r.push(this.ignoreGameEnded),a.push(this.handleGoLobby),e.next=8,this.goSarangbang();case 8:e.next=14;break;case 10:$("#sarangbang").css("color",""),$("#sarangbang-second").text(""),r.splice(r.indexOf(this.ignoreGameEnded),1),a.splice(r.indexOf(this.handleGoLobby),1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"updateLatencyText",value:(n=i(o().mark((function e(){var t,n,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,t,n){var r=e.slice(1).match(/.{2}/g).map((function(e,r){return Math.round(parseInt(e,16)*(1-n)+parseInt(t.slice(1).match(/.{2}/g)[r],16)*n).toString(16).padStart(2,"0")})).join("");return"#".concat(r)},t=a.length>0&&void 0!==a[0]&&a[0],this.latency&&!t){e.next=6;break}return e.next=5,l(f,this,d).call(this);case 5:this.latency=e.sent;case 6:$("#latency").text(this.latency),r=this.latency<=50?n("#00FF00","#0000FF",this.latency/50):this.latency<=150?n("#0000FF","#FFFF00",(this.latency-50)/100):this.latency<=300?n("#FFFF00","#FF0000",(this.latency-150)/150):this.latency<=1e3?n("#FF0000","#808080",(this.latency-300)/700):"#808080",$("#latency").css("color",r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getKoreanBanner",value:function(e){return'\n        <a href="https://refracta.github.io/nemelx-alter-3d" id="coloredText">카드 안에 모든 것이 있나니!</a> <a title="서버 지연 시간입니다. 다시 측정하려면 클릭하세요." style="text-decoration: none" href="javascript:DWEM.Modules.CNCBanner.updateLatencyText(true)">(<span id="latency">?</span> MS)</a>\n        <br>\n        '.concat(e?'\n        <a href="https://webtiles.nethack.live" style="font-size: small; margin: 0; padding:0; text-decoration: none"> 넷핵도 웹타일로 플레이 할 수 있다는 것을 아시나요?</a>\n        <br>':"",'\n        <details>\n            <summary style="cursor: pointer;">KST 2024.06.19 14:12:00 시점의 <a href="https://crawl.project357.org">CPO (호주 서버)</a> 사용자 데이터베이스를 사용하여 서버를 시작했습니다.</summary>\n            <div>\n                <p>이것은 단순히 계정 선점 남용(기존 사용자들의 스코어를 망치는 등의 트롤링 행위)을 방지하기 위한 조치입니다. 여러 서버에 걸쳐 서로 다른 소유자를 가진 있는 계정이 있는 경우, 이러한 계정 소유자를 CPO 계정의 소유자로 간주하지 않습니다. 소명 기간은 1년입니다. 다른 서버의 자격 증명을 <strong>2025년 6월</strong>까지 수동으로 제출하면 계정이 최초 요청자에게 이전됩니다.</p>\n                <p><strong>[자격 증명 제출 방법]</strong><br>\n                    다른 서버에 로그인하여 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가한 후 <a href="javascript:DWEM.Modules.CNCBanner.openRCLinks()">RC 링크</a>를 제출하세요 (<a href="https://discord.com/invite/mNcPSDendT">서버 디스코드 - cnc-account-migration 채널</a>). 계정을 받은 후에는 소명 기간이 끝날 때까지 CNC 계정의 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가하고 유지하세요. 또한, 이러한 상황에 있는 CPO 사용자는 이 서버의 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가해야 합니다. 이 줄이 있으면 CPO 계정 사용자를 최초 요청자로 간주합니다.</p>\n                <p>KST 2024.06.19 19:00:00 갱신: 본 서버에 처음 로그인할 때 "# CRAWL.NEMELEX.CARDS" 줄이 자동으로 Trunk RC 파일에 삽입됩니다.</p>\n                <p>KST 2024.06.18 00:00:00에서 2024.06.18 07:03:00 사이에 등록한 사용자에 대해서는 계정 데이터가(비밀번호 등) CPO의 것으로 변경되었습니다 (게임 데이터는 유지됩니다). 로그인하는 데 문제가 있는 경우 관리자에게 연락하세요.</p>\n            </div>\n        </details>\n        <p style="padding:5px; border-radius:10px; background-color:#2c6f17; display:inline-block; margin:20px 0 10px 0; line-height:1.3;">\n            <a href="https://archive.nemelex.cards">플레이어 데이터</a> -\n            <a href="https://github.com/refracta/dcss-server/issues">버그 신고</a> -\n            <a id="sarangbang" href="javascript:DWEM.Modules.CNCBanner.toggleSarangbang()" title="사랑방은 한옥에서 손님을 맞이하는 방을 말합니다. 이 기능이 켜져있으면 자동으로 관전자 수가 제일 많은 플레이어를 관전합니다.">사랑방<span id="sarangbang-second"></span></a> - \n            <a href="https://terminal.nemelex.cards">웹 터미널</a> - \n            <a href="javascript:DWEM.Modules.ModuleManager.toggle()">DWEM 모듈 관리자 (Ctrl + F12)</a>\n            <br>\n            \'nemelex\' 사용자로 포트 1326에서 SSH 접속이 가능합니다. 비밀번호 \'xobeh\' 또는 <a href="https://archive.nemelex.cards/cao_key" style="text-decoration:none;">CAO 키</a>를 사용하여 인증할 수 있습니다.\n            <br>\n            <a href="https://archive.nemelex.cards/code_of_conduct.txt">서버 규칙</a>을 준수해주세요.\n            <br>\n            계정 또는 서버 문제의 경우, <a href="https://discord.com/invite/mNcPSDendT">서버 디스코드</a>에서 ASCIIPhilia에게 문의할 수 있습니다.\n        </p>\n        <script>\n            DWEM.Modules.CNCBanner.updateLatencyText();\n        <\/script>\n        ').concat(e?"\n        <p>\n            안녕하세요, ".concat(e,'! <br>여기서 기록을 확인할 수 있습니다: <a href="https://archive.nemelex.cards/morgue/').concat(e,'/">morgues</a> <a href="https://archive.nemelex.cards/ttyrec/').concat(e,'/">ttyrecs</a>\n        </p>\n        <script>\n            DWEM.Modules.CNCBanner.colorizeText();\n        <\/script>\n        '):"","\n    ")}},{key:"getEnglishBanner",value:function(e){return'<a href="https://refracta.github.io/nemelx-alter-3d" id="coloredText">It\'s all in the cards!</a> <a title="This is your server latency. Click to remeasure." style="text-decoration: none" href="javascript:DWEM.Modules.CNCBanner.updateLatencyText(true)">(<span id="latency">?</span> MS)</a>\n                    <br>\n                    '.concat(e?'\n                    <a href="https://webtiles.nethack.live" style="font-size: small; margin: 0; padding:0; text-decoration: none"> Did you know that NetHack can be played on WebTiles? </a>\n                    <br>':"",'\n                    <details>\n                        <summary style="cursor: pointer;">We have started the server using the user database from <a href="https://crawl.project357.org">CPO</a> as of KST 2024.06.19 14:12:00.</summary>\n                        <div>\n                            <p>This is simply a method to prevent account griefing. If you have accounts with different owners across multiple servers, we will not consider those account owners as the owners of the CPO account. The appeal period is one year. If you manually submit credentials from other servers to me by <strong>June 2025</strong>, the account will be transferred to the earliest requester.</p>\n                            <p><strong>[How to Submit Credentials]</strong><br>\n                                Log into the other server, add the line "# CRAWL.NEMELEX.CARDS" at the top of the trunk RC file, and then submit the <a href="javascript:DWEM.Modules.CNCBanner.openRCLinks()">RC link</a> to me (<a href="https://discord.com/invite/mNcPSDendT">Server Discord - cnc-account-migration Channel</a>). After receiving the account, add and maintain the line "# CRAWL.NEMELEX.CARDS" at the top of the CNC account\'s trunk RC file until the appeal period ends. Additionally, CPO users in this situation should add the line "# CRAWL.NEMELEX.CARDS" at the top of the trunk RC file on this server. If this line is present, I will consider the CPO account user as the earliest requester.</p>\n                            <p>KST 2024.06.19 19:00:00 Updated: When you log into the this server for the first time, the line "# CRAWL.NEMELEX.CARDS" is automatically inserted into the trunk RC.</p>\n                            <p>For users who registered between KST 2024.06.18 00:00:00 and 2024.06.18 07:03:00, the account credentials have been switched to CPO\'s (game data will be retained). If you encounter any issues logging in, please contact me.</p>\n                        </div>\n                    </details>\n                    <p style="padding:5px; border-radius:10px; background-color:#2c6f17; display:inline-block; margin:20px 0 10px 0; line-height:1.3;">\n                        <a href="https://archive.nemelex.cards">Player Data</a> -\n                        <a href="https://github.com/refracta/dcss-server/issues">Report a Bug</a> -\n                        <a id="sarangbang" href="javascript:DWEM.Modules.CNCBanner.toggleSarangbang()" title="The \'Sarangbang\' refers to the room in traditional Korean houses used to receive guests. When this feature is enabled, it will automatically find and watch the player with the highest number of spectators.">Sarangbang<span id="sarangbang-second"></span></a> - \n                        <a href="https://terminal.nemelex.cards">Web Terminal</a> - \n                        <a href="javascript:DWEM.Modules.ModuleManager.toggle()">DWEM Module Manager (Ctrl + F12)</a>\n                        <br>\n                        SSH is available on port 1326 with the user \'nemelex\'. You can use the password \'xobeh\' or authenticate using the <a href="https://archive.nemelex.cards/cao_key" style="text-decoration:none;">CAO key</a>.\n                        <br>\n                        Please read and follow the <a href="https://archive.nemelex.cards/code_of_conduct.txt">Code of Conduct</a> for this server.\n                        <br>\n                        For account or server issues, contact ASCIIPhilia on <a href="https://discord.com/invite/mNcPSDendT">Server Discord</a>.\n                    </p>\n                    <script>\n                        DWEM.Modules.CNCBanner.updateLatencyText();\n                    <\/script>\n                    ').concat(e?"\n                    <p>\n                        Hello, ".concat(e,'! View your <a href="https://archive.nemelex.cards/morgue/').concat(e,'/">morgues</a> <a href="https://archive.nemelex.cards/ttyrec/').concat(e,'/">ttyrecs</a>.\n                    </p>\n                    <script>\n                        DWEM.Modules.CNCBanner.colorizeText();\n                        DWEM.Modules.CNCBanner.updateLatencyText();\n                    <\/script>\n                    '):"","\n                ")}},{key:"onLoad",value:function(){var e=this,t=DWEM.Modules,n=t.IOHook,r=t.SiteInformation,o=navigator.language||navigator.userLanguage;n.handle_message.before.push((function(t){if("html"===t.msg&&"banner"===t.id){var n=r.current_user;o.startsWith("ko")?t.content=e.getKoreanBanner(n):t.content=e.getEnglishBanner(n)}})),this.ignoreGameEnded=this.ignoreGameEnded.bind(this),this.handleGoLobby=this.handleGoLobby.bind(this)}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a}();function p(){var e=["#ff4000","#008cc0","#cad700","#009800","#8000ff"];return e[Math.floor(Math.random()*e.length)]}function d(){var e=DWEM.Modules.WebSocketFactory;return new Promise((function(t){var n,r,o=e.create((function(e){"register_fail"===e.msg&&(o.close(),r=Date.now(),t(r-n))}));o.onopen=function(){n=Date.now(),o.send(JSON.stringify({msg:"register",username:"",password:"LATENCY_CHECK",email:""}))}}))}function y(){var e=DWEM.Modules.WebSocketFactory;return new Promise((function(t){var n=[],r=e.create((function(e){"lobby_entry"===e.msg?n.push(e):"lobby_complete"===e.msg&&(r.close(),t(n))}))}))}function m(){return v.apply(this,arguments)}function v(){return(v=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=10;case 1:if(!(t>0)){e.next=11;break}return $("#sarangbang").css("color","blue"),$("#sarangbang-second").text(" (".concat(t,"s)")),e.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:if(this.sarangbang){e.next=8;break}return e.abrupt("return");case 8:t--,e.next=1;break;case 11:return e.next=13,this.goSarangbang();case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}s(h,"name","CNCBanner"),s(h,"version","1.0"),s(h,"dependencies",["IOHook","SiteInformation","ModuleManager","WebSocketFactory"]),s(h,"description","This module sets the banner for the CNC server.")},11:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),c=new T(r||[]);return i(a,"_invoke",{value:L(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function _(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(D([])));x&&x!==n&&a.call(x,s)&&(k=x);var E=_.prototype=b.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}})}function L(t,n,r){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:y,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(M.prototype),f(M.prototype,u,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new M(h(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function s(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function l(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}n.r(t),n.d(t,{default:()=>h});var f=new WeakSet,h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,f)},t=[{key:"openRCLinks",value:function(){var e=window.open("","_blank","width=600,height=400");e.document.open(),e.document.write("<!DOCTYPE html><html><head><title>RC Links</title></head><body><pre>[CDI]\nhttps://crawl.dcss.io/crawl/rcfiles/crawl-git/%n.rc\n\n[CDO]\nhttps://crawl.develz.org/configs/trunk/%n.rc\n\n[CAO]\nhttps://crawl.akrasiac.org/rcfiles/crawl-git/%n.rc\n\n[CUE]\nhttps://underhound.eu/crawl/rcfiles/crawl-git/%n.rc\n\n[CBRO2]\nhttps://cbro.berotato.org/rcfiles/crawl-git/%n\n\n[LLD]\nhttp://lazy-life.ddo.jp/mirror/meta/0.31/rcfiles/%n.rc\n(You can use 0.31 version RC)\n\n[CWZ]\nhttps://webzook.net/soup/rcfiles/trunk/%n.rc\n\n[CXC]\nhttps://crawl.xtahua.com/crawl/rcfiles/crawl-git/%n.rc\n</pre></body></html>")}},{key:"colorizeText",value:function(){var e=this,t=$("#coloredText").text().split(" ");this.colors=this.colors||t.map((function(t){return l(f,e,p).call(e)}));var n=t.map((function(t,n){return'<span style="color:'.concat(e.colors[n],';">').concat(t,"</span>")}));document.getElementById("coloredText").innerHTML=n.join(" ")}},{key:"goSarangbang",value:(a=i(o().mark((function e(){var t,n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(f,this,y).call(this);case 2:(t=e.sent).length>0?(t.sort((function(e,t){return e.spectator_count-t.spectator_count})),n=t[t.length-1].spectator_count,t=t.filter((function(e){return e.spectator_count===n})),r=t[Math.floor(Math.random()*t.length)].username,location.hash="#watch-".concat(r)):setTimeout(this.goSarangbang.bind(this),1e3);case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"ignoreGameEnded",value:function(e){if("game_ended"===e.msg)return!0}},{key:"handleGoLobby",value:function(e){"go_lobby"===e.msg&&l(f,this,m).call(this)}},{key:"toggleSarangbang",value:(r=i(o().mark((function e(){var t,n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=DWEM.Modules.IOHook,n=t.handle_message,r=n.before,a=n.after,this.sarangbang=!this.sarangbang,!this.sarangbang){e.next=10;break}return r.push(this.ignoreGameEnded),a.push(this.handleGoLobby),e.next=8,this.goSarangbang();case 8:e.next=14;break;case 10:$("#sarangbang").css("color",""),$("#sarangbang-second").text(""),r.splice(r.indexOf(this.ignoreGameEnded),1),a.splice(r.indexOf(this.handleGoLobby),1);case 14:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"updateLatencyText",value:(n=i(o().mark((function e(){var t,n,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e,t,n){var r=e.slice(1).match(/.{2}/g).map((function(e,r){return Math.round(parseInt(e,16)*(1-n)+parseInt(t.slice(1).match(/.{2}/g)[r],16)*n).toString(16).padStart(2,"0")})).join("");return"#".concat(r)},t=a.length>0&&void 0!==a[0]&&a[0],this.latency&&!t){e.next=6;break}return e.next=5,l(f,this,d).call(this);case 5:this.latency=e.sent;case 6:$("#latency").text(this.latency),r=this.latency<=50?n("#00FF00","#0000FF",this.latency/50):this.latency<=150?n("#0000FF","#FFFF00",(this.latency-50)/100):this.latency<=300?n("#FFFF00","#FF0000",(this.latency-150)/150):this.latency<=1e3?n("#FF0000","#808080",(this.latency-300)/700):"#808080",$("#latency").css("color",r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getKoreanBanner",value:function(e){return'\n        <a href="https://refracta.github.io/nemelx-alter-3d" id="coloredText">카드 안에 모든 것이 있나니!</a> <a title="서버 지연 시간입니다. 다시 측정하려면 클릭하세요." style="text-decoration: none" href="javascript:DWEM.Modules.CNCBanner.updateLatencyText(true)">(<span id="latency">?</span> MS)</a>\n        <br>\n        '.concat(e?'\n        <a href="https://webtiles.nethack.live" style="font-size: small; margin: 0; padding:0; text-decoration: none"> 넷핵도 웹타일로 플레이 할 수 있다는 것을 아시나요?</a>\n        <br>':"",'\n        <details>\n            <summary style="cursor: pointer;">KST 2024.06.19 14:12:00 시점의 <a href="https://crawl.project357.org">CPO (호주 서버)</a> 사용자 데이터베이스를 사용하여 서버를 시작했습니다.</summary>\n            <div>\n                <p>이것은 단순히 계정 선점 남용(기존 사용자들의 스코어를 망치는 등의 트롤링 행위)을 방지하기 위한 조치입니다. 여러 서버에 걸쳐 서로 다른 소유자를 가진 있는 계정이 있는 경우, 이러한 계정 소유자를 CPO 계정의 소유자로 간주하지 않습니다. 소명 기간은 1년입니다. 다른 서버의 자격 증명을 <strong>2025년 6월</strong>까지 수동으로 제출하면 계정이 최초 요청자에게 이전됩니다.</p>\n                <p><strong>[자격 증명 제출 방법]</strong><br>\n                    다른 서버에 로그인하여 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가한 후 <a href="javascript:DWEM.Modules.CNCBanner.openRCLinks()">RC 링크</a>를 제출하세요 (<a href="https://discord.com/invite/mNcPSDendT">서버 디스코드 - cnc-account-migration 채널</a>). 계정을 받은 후에는 소명 기간이 끝날 때까지 CNC 계정의 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가하고 유지하세요. 또한, 이러한 상황에 있는 CPO 사용자는 이 서버의 Trunk RC 파일 상단에 "# CRAWL.NEMELEX.CARDS" 줄을 추가해야 합니다. 이 줄이 있으면 CPO 계정 사용자를 최초 요청자로 간주합니다.</p>\n                <p>KST 2024.06.19 19:00:00 갱신: 본 서버에 처음 로그인할 때 "# CRAWL.NEMELEX.CARDS" 줄이 자동으로 Trunk RC 파일에 삽입됩니다.</p>\n                <p>KST 2024.06.18 00:00:00에서 2024.06.18 07:03:00 사이에 등록한 사용자에 대해서는 계정 데이터가(비밀번호 등) CPO의 것으로 변경되었습니다 (게임 데이터는 유지됩니다). 로그인하는 데 문제가 있는 경우 관리자에게 연락하세요.</p>\n            </div>\n        </details>\n        <p style="padding:5px; border-radius:10px; background-color:#2c6f17; display:inline-block; margin:20px 0 10px 0; line-height:1.3;">\n            <a href="https://archive.nemelex.cards">플레이어 데이터</a> -\n            <a href="https://github.com/refracta/dcss-server/issues">버그 신고</a> -\n            <a id="sarangbang" href="javascript:DWEM.Modules.CNCBanner.toggleSarangbang()" title="사랑방은 한옥에서 손님을 맞이하는 방을 말합니다. 이 기능이 켜져있으면 자동으로 관전자 수가 제일 많은 플레이어를 관전합니다.">사랑방<span id="sarangbang-second"></span></a> - \n            <a href="https://terminal.nemelex.cards">웹 터미널</a> - \n            <a href="javascript:DWEM.Modules.ModuleManager.toggle()">DWEM 모듈 관리자 (Ctrl + F12)</a>\n            <br>\n            \'nemelex\' 사용자로 포트 1326에서 SSH 접속이 가능합니다. 비밀번호 \'xobeh\' 또는 <a href="https://archive.nemelex.cards/cao_key" style="text-decoration:none;">CAO 키</a>를 사용하여 인증할 수 있습니다.\n            <br>\n            <a href="https://archive.nemelex.cards/code_of_conduct.txt">서버 규칙</a>을 준수해주세요.\n            <br>\n            계정 또는 서버 문제의 경우, <a href="https://discord.com/invite/mNcPSDendT">서버 디스코드</a>에서 ASCIIPhilia에게 문의할 수 있습니다.\n        </p>\n        <script>\n            DWEM.Modules.CNCBanner.updateLatencyText();\n        <\/script>\n        ').concat(e?"\n        <p>\n            안녕하세요, ".concat(e,'! <br>여기서 기록을 확인할 수 있습니다: <a href="https://archive.nemelex.cards/morgue/').concat(e,'/">morgues</a> <a href="https://archive.nemelex.cards/ttyrec/').concat(e,'/">ttyrecs</a>\n        </p>\n        <script>\n            DWEM.Modules.CNCBanner.colorizeText();\n        <\/script>\n        '):"","\n    ")}},{key:"getEnglishBanner",value:function(e){return'<a href="https://refracta.github.io/nemelx-alter-3d" id="coloredText">It\'s all in the cards!</a> <a title="This is your server latency. Click to remeasure." style="text-decoration: none" href="javascript:DWEM.Modules.CNCBanner.updateLatencyText(true)">(<span id="latency">?</span> MS)</a>\n                    <br>\n                    '.concat(e?'\n                    <a href="https://webtiles.nethack.live" style="font-size: small; margin: 0; padding:0; text-decoration: none"> Did you know that NetHack can be played on WebTiles? </a>\n                    <br>':"",'\n                    <details>\n                        <summary style="cursor: pointer;">We have started the server using the user database from <a href="https://crawl.project357.org">CPO</a> as of KST 2024.06.19 14:12:00.</summary>\n                        <div>\n                            <p>This is simply a method to prevent account griefing. If you have accounts with different owners across multiple servers, we will not consider those account owners as the owners of the CPO account. The appeal period is one year. If you manually submit credentials from other servers to me by <strong>June 2025</strong>, the account will be transferred to the earliest requester.</p>\n                            <p><strong>[How to Submit Credentials]</strong><br>\n                                Log into the other server, add the line "# CRAWL.NEMELEX.CARDS" at the top of the trunk RC file, and then submit the <a href="javascript:DWEM.Modules.CNCBanner.openRCLinks()">RC link</a> to me (<a href="https://discord.com/invite/mNcPSDendT">Server Discord - cnc-account-migration Channel</a>). After receiving the account, add and maintain the line "# CRAWL.NEMELEX.CARDS" at the top of the CNC account\'s trunk RC file until the appeal period ends. Additionally, CPO users in this situation should add the line "# CRAWL.NEMELEX.CARDS" at the top of the trunk RC file on this server. If this line is present, I will consider the CPO account user as the earliest requester.</p>\n                            <p>KST 2024.06.19 19:00:00 Updated: When you log into the this server for the first time, the line "# CRAWL.NEMELEX.CARDS" is automatically inserted into the trunk RC.</p>\n                            <p>For users who registered between KST 2024.06.18 00:00:00 and 2024.06.18 07:03:00, the account credentials have been switched to CPO\'s (game data will be retained). If you encounter any issues logging in, please contact me.</p>\n                        </div>\n                    </details>\n                    <p style="padding:5px; border-radius:10px; background-color:#2c6f17; display:inline-block; margin:20px 0 10px 0; line-height:1.3;">\n                        <a href="https://archive.nemelex.cards">Player Data</a> -\n                        <a href="https://github.com/refracta/dcss-server/issues">Report a Bug</a> -\n                        <a id="sarangbang" href="javascript:DWEM.Modules.CNCBanner.toggleSarangbang()" title="The \'Sarangbang\' refers to the room in traditional Korean houses used to receive guests. When this feature is enabled, it will automatically find and watch the player with the highest number of spectators.">Sarangbang<span id="sarangbang-second"></span></a> - \n                        <a href="https://terminal.nemelex.cards">Web Terminal</a> - \n                        <a href="javascript:DWEM.Modules.ModuleManager.toggle()">DWEM Module Manager (Ctrl + F12)</a>\n                        <br>\n                        SSH is available on port 1326 with the user \'nemelex\'. You can use the password \'xobeh\' or authenticate using the <a href="https://archive.nemelex.cards/cao_key" style="text-decoration:none;">CAO key</a>.\n                        <br>\n                        Please read and follow the <a href="https://archive.nemelex.cards/code_of_conduct.txt">Code of Conduct</a> for this server.\n                        <br>\n                        For account or server issues, contact ASCIIPhilia on <a href="https://discord.com/invite/mNcPSDendT">Server Discord</a>.\n                    </p>\n                    <script>\n                        DWEM.Modules.CNCBanner.updateLatencyText();\n                    <\/script>\n                    ').concat(e?"\n                    <p>\n                        Hello, ".concat(e,'! View your <a href="https://archive.nemelex.cards/morgue/').concat(e,'/">morgues</a> <a href="https://archive.nemelex.cards/ttyrec/').concat(e,'/">ttyrecs</a>.\n                    </p>\n                    <script>\n                        DWEM.Modules.CNCBanner.colorizeText();\n                        DWEM.Modules.CNCBanner.updateLatencyText();\n                    <\/script>\n                    '):"","\n                ")}},{key:"onLoad",value:function(){var e=this,t=DWEM.Modules,n=t.IOHook,r=t.SiteInformation,o=navigator.language||navigator.userLanguage;n.handle_message.before.push((function(t){if("html"===t.msg&&"banner"===t.id){var n=r.current_user;o.startsWith("ko")?t.content=e.getKoreanBanner(n):t.content=e.getEnglishBanner(n)}})),this.ignoreGameEnded=this.ignoreGameEnded.bind(this),this.handleGoLobby=this.handleGoLobby.bind(this)}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a}();function p(){var e=["#ff4000","#008cc0","#cad700","#009800","#8000ff"];return e[Math.floor(Math.random()*e.length)]}function d(){var e=DWEM.Modules.WebSocketFactory;return new Promise((function(t){var n,r,o=e.create((function(e){"register_fail"===e.msg&&(o.close(),r=Date.now(),t(r-n))}));o.onopen=function(){n=Date.now(),o.send(JSON.stringify({msg:"register",username:"",password:"LATENCY_CHECK",email:""}))}}))}function y(){var e=DWEM.Modules.WebSocketFactory;return new Promise((function(t){var n=[],r=e.create((function(e){"lobby_entry"===e.msg?n.push(e):"lobby_complete"===e.msg&&(r.close(),t(n))}))}))}function m(){return v.apply(this,arguments)}function v(){return(v=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=10;case 1:if(!(t>0)){e.next=11;break}return $("#sarangbang").css("color","blue"),$("#sarangbang-second").text(" (".concat(t,"s)")),e.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:if(this.sarangbang){e.next=8;break}return e.abrupt("return");case 8:t--,e.next=1;break;case 11:return e.next=13,this.goSarangbang();case 13:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}s(h,"name","CNCBanner"),s(h,"version","1.0"),s(h,"dependencies",["IOHook","SiteInformation","ModuleManager","WebSocketFactory"]),s(h,"description","This module sets the banner for the CNC server.")},233:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"onLoad",value:function(){DWEM.Modules.IOHook.send_message.before.push((function(e,t){if("chat_msg"===e&&"/test"===t.text)return console.log("/test"),!0}))}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","CommandManager"),a(c,"version","1.0"),a(c,"dependencies",["IOHook"]),a(c,"description","(Library, Alpha) This module provides features for creating commands.")},942:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function c(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>u});var u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"handle_message",{before:[],after:[]}),c(this,"send_message",{before:[],after:[]})},t=[{key:"onLoad",value:function(){var e=DWEM.SourceMapperRegistry,t=e.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=handle_message;handle_message=function(t){var n,r=!1,a=o(DWEM.Modules.IOHook.handle_message.before);try{for(a.s();!(n=a.n()).done;){var i=n.value;try{r=r||i(t)}catch(e){console.error(e)}}}catch(e){a.e(e)}finally{a.f()}if(!r){e(t);var c,s=o(DWEM.Modules.IOHook.handle_message.after);try{for(s.s();!(c=s.n()).done;){var u=c.value;try{u(t)}catch(e){console.error(e)}}}catch(e){s.e(e)}finally{s.f()}}}}.toString(),"()"));e.add("client",t);var n=e.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=send_message;send_message=function(t,n){var r,a=!1,i=o(DWEM.Modules.IOHook.send_message.before);try{for(i.s();!(r=i.n()).done;){var c=r.value;try{a=a||c(t,n)}catch(e){console.error(e)}}}catch(e){i.e(e)}finally{i.f()}if(!a){e(t,n);var s,u=o(DWEM.Modules.IOHook.send_message.after);try{for(u.s();!(s=u.n()).done;){var l=s.value;try{l(t,n)}catch(e){console.error(e)}}}catch(e){u.e(e)}finally{u.f()}}}}.toString(),"()"));e.add("comm",n)}}],t&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();c(u,"name","IOHook"),c(u,"version","1.0"),c(u,"description","(Library) This module allows users to add hooks before and after sending and receiving WebSocket data.")},580:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});const r=(o={Chart:()=>__WEBPACK_EXTERNAL_MODULE_https_cdn_skypack_dev_chart_js_c4211741__.Chart,registerables:()=>__WEBPACK_EXTERNAL_MODULE_https_cdn_skypack_dev_chart_js_c4211741__.registerables},a={},n.d(a,o),a);var o,a,i;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function u(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}r.Chart.register.apply(r.Chart,function(e){if(Array.isArray(e))return f(e)}(i=r.registerables)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var h=function(){return function(e,t,n){return t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.chart=null,this.lastSent="l",this.chartData={labels:[],datasets:[{label:"Latency",backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgba(255, 99, 132, 1)",data:[],fill:!1}]},this.isMeasuring=!1,this.startTime=0,this.measurementTimer=null}),[{key:"onLoad",value:function(){var e=this,t=DWEM.Modules.IOHook;t.handle_message.after.push((function(t){"game_started"===t.msg&&e.initComponents()})),t.handle_message.before.push((function(t){return e.measureLatency(t)}))}},{key:"initComponents",value:function(){var e=this,t=document.getElementById("right_column"),n=document.createElement("canvas");t.appendChild(n);var o=n.getContext("2d");this.chart=new r.Chart(o,{type:"line",data:this.chartData,options:{scales:{x:{type:"category",position:"bottom"},y:{beginAtZero:!0}},animation:{duration:0},maintainAspectRatio:!0}});var a=document.createElement("button");a.textContent="Start Measurement",a.style.color="black",a.addEventListener("click",(function(){return e.startMeasurement()}));var i=document.createElement("button");i.textContent="Stop Measurement",i.style.color="black",i.addEventListener("click",(function(){return e.stopMeasurement()}));var c=document.createElement("button");c.textContent="Reset Data",c.style.color="black",c.addEventListener("click",(function(){return e.resetChartData()})),t.appendChild(a),t.appendChild(i),t.appendChild(c)}},{key:"startMeasurement",value:function(){var e=this;this.isMeasuring||(this.isMeasuring=!0,this.measurementTimer=setInterval((function(){return e.sendInput()}),Index.measurementInterval))}},{key:"stopMeasurement",value:function(){this.isMeasuring&&(clearInterval(this.measurementTimer),this.isMeasuring=!1)}},{key:"resetChartData",value:function(){this.chartData.labels=[],this.chartData.datasets.forEach((function(e){return e.data=[]})),this.chart.update()}},{key:"sendInput",value:function(){var e={text:"h"===this.lastSent?"l":"h",msg:"input"};this.lastSent=e.text,socket.send(JSON.stringify(e)),this.startTime=performance.now()}},{key:"measureLatency",value:function(e){if(this.isMeasuring){var t=performance.now()-this.startTime,n=this.chartData.labels.length+1;this.chartData.labels.push("".concat(n,"t")),this.chartData.datasets[0].data.push(t),this.chartData.labels.length>1e3&&(this.chartData.labels=[],this.chartData.datasets.forEach((function(e){return e.data=[]}))),this.chart.update()}}}])}();u(h,"name","LatencyIndicator"),u(h,"version","1.0"),u(h,"dependencies",["IOHook"]),u(h,"measurementInterval",parseInt(localStorage.LI_INTERVAL||"30"))},330:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"onLoad",value:function(){var e=DWEM,t=e.SourceMapperRegistry;e.MatcherRegistry;var n=t.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=receive_message;receive_message=function(t){try{var n=$("<div>").append(t.content),r=$(n).find(".chat_msg").text();if((r.startsWith('{"rc"')||r.startsWith('{"msg"'))&&JSON.parse(r).cmd)return}catch(e){}e(t)},comm.register_handlers({chat:receive_message})}.toString(),"()"));t.add("chat",n)}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","LegacyModuleSupport"),a(c,"version","1.0"),a(c,"description","This module serves to increase compatibility with the previous CWZ module.")},928:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function i(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t,n){return t=d(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&p(o,n.prototype),o}(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},f(e)}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}n.r(t),n.d(t,{default:()=>v});var y=function(e){function t(){var e;s(this,t),e=u(this,t);var n=document.createElement("div");return n.innerHTML='\n<div class="ui-popup" data-generation-id="3">\n    <div class="ui-popup-overlay"></div>\n    <div class="ui-popup-outer">\n        <div class="ui-popup-inner">\n            <div class="popup-header">\n                <a href="https://github.com/refracta/dcss-webtiles-extension-module" target="_blank">\n                    DWEM v'.concat(DWEM.Config.Version,'\n                </a>\n            </div>\n            <div class="module-list"></div>\n            <div class="actions">\n                <button class="close-button">Close</button>\n            </div>\n        </div>\n    </div>\n</div>'),e.append(n),e.classList.add("module-container"),e}return l(t,e),i(t)}(f(HTMLDivElement));customElements.define("module-container",y,{extends:"div"});var m=function(e){function t(){var e;return s(this,t),(e=u(this,t)).textContent="\n.module-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 9999;\n    overflow: hidden;\n    display: none;\n}\n\n.ui-popup + .ui-popup { padding-top: 20px; }\n.ui-popup + .ui-popup + .ui-popup { padding-top: 40px; }\n.ui-popup + .ui-popup + .ui-popup + .ui-popup { padding-top: 60px; }\n\n.ui-popup-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 9998;\n}\n\n.ui-popup-outer {\n    margin: 50px;\n    max-height: calc(95vh - 100px);\n    padding: 20px;\n    background-color: #040204;\n    border: 1px solid black;\n    outline: 2px solid #7d623c;\n    display: flex;\n    z-index: 9999;\n    position: relative;\n    overflow: hidden;\n    flex-direction: column;\n    width: calc(100% - 140px);\n}\n\n.ui-popup-inner {\n    position: relative;\n    display: flex;\n    max-height: calc(95vh - 100px - 46px);\n    overflow-y: auto;\n    overflow-x: hidden;\n    flex-direction: column;\n    width: 100%;\n}\n\n.popup-header {\n    font-size: 18px;\n    font-weight: bold;\n    margin-bottom: 10px;\n    color: #fff;\n}\n\n.popup-header a {\n    color: #fff;\n    text-decoration: none;\n}\n\n.module-info {\n    background-color: #333;\n    color: #fff;\n    padding: 10px;\n    margin: 5px 0;\n    cursor: pointer;\n}\n\n.actions {\n    display: flex;\n    justify-content: center;\n    padding: 10px;\n}\n\n.close-button {\n    padding: 10px 20px;\n    background-color: #7d623c;\n    color: #fff;\n    border: none;\n    cursor: pointer;\n    font-size: 16px;\n}\n",e}return l(t,e),i(t)}(f(HTMLStyleElement));customElements.define("module-container-style",m,{extends:"style"});var v=function(){return i((function e(){s(this,e)}),[{key:"onLoad",value:function(){var e=this;this.content=document.createElement("div"),this.shadow=this.content.attachShadow({mode:"open"}),this.style=new m,this.shadow.append(this.style),this.container=new y,this.shadow.append(this.container),document.body.append(this.content),this.showModules(),this.toggle(!1),document.addEventListener("keydown",(function(t){t.ctrlKey&&"F12"===t.key&&(e.showModules(),e.toggle())})),this.shadow.querySelector(".close-button").addEventListener("click",(function(){e.toggle(!1)})),this.shadow.querySelector(".ui-popup-overlay").addEventListener("click",(function(){e.toggle(!1)}))}},{key:"showModules",value:function(){var e=this.shadow.querySelector(".module-list");e.innerHTML="",DWEM.ModuleClasses.forEach((function(t,n){var r=t.name,o=t.version,a=t.dependencies,i=void 0===a?[]:a,c=t.description,s=void 0===c?"":c,u=t.path,l=t.onMMMClicked,f=u;try{new URL(f)}catch(e){try{f=new URL(DWEM.Entrypoint+f).href}catch(e){}}var h=document.createElement("div");h.classList.add("module-info");var p="";i.length>0&&(p="<div>Dependencies: ".concat(i.join(", "),"</div>")),h.innerHTML="\n                <div><strong>".concat(r,":").concat(o,"</strong></div>\n                ").concat(p,"\n                <div>Description: ").concat(s,'</div>\n                <div>Entrypoint: <a style="color: white" href="').concat(f,'">').concat(f,"</a></div>\n            "),h.addEventListener("click",(function(){null==l||l()})),e.append(h)}))}},{key:"toggle",value:function(e){var t=this.shadow.querySelector(".module-container");t.style.display="boolean"==typeof e?e?"block":"none":"none"===t.style.display?"block":"none"}}])}();o(v,"name","ModuleManager"),o(v,"version","1.0"),o(v,"dependencies",[]),o(v,"description","This module helps to check and control the loading status of multiple modules.")},479:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){o=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",u=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),c=new T(r||[]);return i(a,"_invoke",{value:L(e,n,c)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d="suspendedStart",y="suspendedYield",m="executing",v="completed",g={};function b(){}function w(){}function _(){}var k={};f(k,s,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(D([])));x&&x!==n&&a.call(x,s)&&(k=x);var E=_.prototype=b.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(o,i,c,s){var u=p(e[o],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):t.resolve(f).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,s)}))}s(u.arg)}var o;i(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}})}function L(t,n,r){var o=d;return function(a,i){if(o===m)throw Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var s=j(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=p(t,n,r);if("normal"===u.type){if(o=r.done?v:y,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function j(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=p(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return w.prototype=_,i(E,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=f(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(M.prototype),f(M.prototype,u,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new M(h(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function l(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>h});var h=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"watchers",[])},t=[{key:"get_rc",value:function(e){var t=DWEM.Modules.WebSocketFactory;return new Promise((function(n){var r=t.create((function(o){t.handle_login_cookie(o),"login_success"===o.msg?r.send(JSON.stringify({msg:"get_rc",game_id:e})):"rcfile_contents"===o.msg&&(r.close(),n({contents:o.contents,game_id:e}))}));r.onopen=function(){t.login(r)}}))}},{key:"onLoad",value:function(){var e=this,t=DWEM.Modules.IOHook;t.send_message.after.push(function(){var t=s(o().mark((function t(n,r){var i,c,s,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("play"!==n){t.next=6;break}return t.next=3,e.get_rc(r.game_id);case 3:i=t.sent,c=a(e.watchers);try{for(c.s();!(s=c.n()).done;){u=s.value;try{u(n,i)}catch(e){console.error(e)}}}catch(e){c.e(e)}finally{c.f()}case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.handle_message.after.push(function(){var t=s(o().mark((function t(n){var r,i,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("go_lobby"===n.msg){r=a(e.watchers);try{for(r.s();!(i=r.n()).done;){c=i.value;try{c(n.msg)}catch(e){console.error(e)}}}catch(e){r.e(e)}finally{r.f()}}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();l(h,"name","RCManager"),l(h,"version","1.0"),l(h,"dependencies",["IOHook","WebSocketFactory"]),l(h,"description","(Library) This module provides features for creating custom RC trigger logic.")},446:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"onLoad",value:function(){var e=DWEM,t=e.SourceMapperRegistry;e.MatcherRegistry;var n=t.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=DWEM.Modules.SiteInformation;Object.defineProperty(e,"current_user",{get:function(){return current_user},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watching",{get:function(){return watching},enumerable:!0,configurable:!0}),Object.defineProperty(e,"watching_username",{get:function(){return watching_username},enumerable:!0,configurable:!0}),Object.defineProperty(e,"playing",{get:function(){return playing},enumerable:!0,configurable:!0}),Object.defineProperty(e,"current_hash",{get:function(){return current_hash},enumerable:!0,configurable:!0})}.toString(),"()"));t.add("client",n)}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","SiteInformation"),a(c,"version","1.0"),a(c,"dependencies",[]),a(c,"description","(Library) This module returns site information to other modules.")},943:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function i(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>u});var s=new WeakSet,u=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}(this,s)},t=[{key:"onLoad",value:function(){var e=this;DWEM.Modules.RCManager.watchers.push((function(t,n){"play"===t&&function(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}(s,e,l).call(e,n.contents)}))}}],t&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function l(e){var t=e.match(/dwem_sound_pack\s*\+=\s*.+/g),n=[];if(t){var r,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;n.push(i.split("+=").pop().trim())}}catch(e){a.e(e)}finally{a.f()}}return n}i(u,"name","SoundSupport"),i(u,"version","1.0"),i(u,"dependencies",["RCManager"]),i(u,"description","(Alpha) This module implements sound features in the webtiles environment. You can use it by adding a sound pack to the RC configuration.")},108:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"onLoad",value:function(){var e=DWEM,t=e.SourceMapperRegistry,n=e.MatcherRegistry,r=t.getSourceMapper("BeforeReturnInjection","!".concat(function(){DWEM.Modules.TestModule1.toggle=toggle}.toString(),"()"));n.matchers["my-matcher"]={test:n.getModuleMatcher("chat")},t.add("my-matcher:test",r);var o=t.getSourceMapper("BeforeReturnInjection","!".concat(function(){DWEM.Modules.TestModule1.clear=clear}.toString(),"()"));t.add("chat",o),t.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=get_option;get_option=function(t){switch(t){case"tile_unseen_col":return{r:255,g:0,b:0};case"tile_floor_col":return{r:0,g:255,b:0};case"tile_wall_col":return{r:0,g:0,b:255}}return e(t)}}.toString(),"()"))}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","TestModule1"),a(c,"version","1.0"),a(c,"dependencies",[])},221:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{default:()=>c});var c=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"onLoad",value:function(){var e=DWEM.Modules.IOHook;e.send_message.after.push((function(e,t){console.log("send_message.after",e,t)})),e.handle_message.after.push((function(e){console.log("handle_message.after",e)}))}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();a(c,"name","TestModule2"),a(c,"version","1.0"),a(c,"dependencies",["IOHook"])},618:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>WebSocketFactory});var WebSocketFactory=function(){function WebSocketFactory(){_classCallCheck(this,WebSocketFactory)}return _createClass(WebSocketFactory,[{key:"login",value:function(e){this.get_login_cookie()&&(e.send(JSON.stringify({msg:"token_login",cookie:this.get_login_cookie()})),e.send(JSON.stringify({msg:"set_login_cookie"})))}},{key:"handle_login_cookie",value:function(e){"login_cookie"===e.msg&&this.set_login_cookie(e)}},{key:"create",value:function create(handle_message){var _this=this,socket;function enqueue_messages(msgtext){if(msgtext.match(/^{/)){var msgobj;try{msgobj=eval("("+msgtext+")")}catch(e){return}var msgs=msgobj.msgs;for(var i in null==msgs&&(msgs=[msgobj]),msgs)handle_message(msgs[i])}}var inflater=null;return"Uint8Array"in window&&"Blob"in window&&"FileReader"in window&&"ArrayBuffer"in window&&this.inflate_works_on_ua()&&!$.cookie("no-compression")&&(inflater=new Inflater),socket=inflater?new WebSocket(socket_server):new WebSocket(socket_server,"no-compression"),socket.binaryType="arraybuffer",socket.onmessage=function(e){if(inflater&&e.data instanceof ArrayBuffer){var t=new Uint8Array(e.data.byteLength+4);t.set(new Uint8Array(e.data),0),t.set([0,0,255,255],e.data.byteLength);var n=inflater.append(t);-1===n&&(console.error("Decompression error!"),inflater.append(t)),_this.decode_utf8(n,(function(e){enqueue_messages(e)}))}else enqueue_messages(e.data)},socket}},{key:"onLoad",value:function(){var e=DWEM,t=e.SourceMapperRegistry;e.MatcherRegistry;var n=t.getSourceMapper("BeforeReturnInjection","!".concat(function(){var e=DWEM.Modules.WebSocketFactory;e.inflate_works_on_ua=inflate_works_on_ua,e.get_login_cookie=get_login_cookie,e.set_login_cookie=set_login_cookie,e.decode_utf8=decode_utf8}.toString(),"()"));t.add("client",n)}}])}();_defineProperty(WebSocketFactory,"name","WebSocketFactory"),_defineProperty(WebSocketFactory,"version","1.0"),_defineProperty(WebSocketFactory,"description","(Library) This module simulates a WebSocket that replicates the user's session.")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};function importAll(e){e.keys().forEach((function(t){console.log(t);var n=e(t);console.log(n);var r=t.replace("./","").replace("/index.js","").replace(/\//g,"-");window.MyModules=window.MyModules||{},window.MyModules[r]=n.default}))}importAll(__webpack_require__(937)),console.log("All modules loaded"),MyModules=__webpack_exports__;